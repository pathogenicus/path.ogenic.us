(self.vcvWebpackJsonp4x=self.vcvWebpackJsonp4x||[]).push([["element"],{"./layoutPostFeaturedImage/index.js":function(e,t,a){"use strict";var n=a("./node_modules/vc-cake/index.js"),i=a("./node_modules/@babel/runtime/helpers/esm/extends.js"),s=a("./node_modules/@babel/runtime/helpers/esm/typeof.js"),r=a("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=a("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=a("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=a("./node_modules/@babel/runtime/helpers/esm/inherits.js"),d=a("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=a("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),m=a("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=a("./node_modules/react/index.js");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var v=(0,n.getService)("api"),h=(0,n.getService)("renderProcessor"),f=function(e){(0,u.default)(a,e);var t=g(a);function a(e){var n;return(0,r.default)(this,a),n=t.call(this,e),(0,m.default)((0,l.default)(n),"promise",null),n.state={imgElement:null,parsedWidth:null,parsedHeight:null,naturalWidth:null,naturalHeight:null},n.setImage=n.setImage.bind((0,l.default)(n)),n.setImageState=n.setImageState.bind((0,l.default)(n)),n.setError=n.setError.bind((0,l.default)(n)),n}return(0,o.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.promise=new window.Promise((function(t,a){e.resolve=t,e.setImage(e.props)})),h.add(this.promise)}},{key:"componentWillUnmount",value:function(){this.resolve&&this.resolve(!0),a.image&&a.image.removeEventListener("load",this.setImageState),a.image&&a.image.removeEventListener("error",this.setError)}},{key:"componentDidUpdate",value:function(e,t){e.atts.image!==this.props.atts.image?this.setImage(this.props):(e.atts.size!==this.props.atts.size||e.atts.shape!==this.props.atts.shape)&&this.resetImageSizeState()}},{key:"parseSize",value:function(e,t,a,n){var i=!0;"string"==typeof e?e=e.replace(/\s/g,"").replace(/px/g,"").toLowerCase().split("x"):"object"===(0,s.default)(e)&&(i=e.crop,e=[e.width,e.height]),a=parseInt(a),n=parseInt(n);var r=parseInt(e[0])<a,o=parseInt(e[1])<n;if(i)e[0]=parseInt(e[0])<a?parseInt(e[0]):a,e[1]=parseInt(e[1])<n?parseInt(e[1]):n;else{if(e[0]=r?parseInt(e[0]):a,e[1]=o?parseInt(e[1]):n,r&&!o){var l=e[0]/a;e[1]=parseInt(n*l)}if(o&&!r){var u=e[1]/n;e[0]=parseInt(a*u)}if(o&&r)if(n<a){var d=e[0]/a;e[1]=parseInt(n*d)}else{var c=e[1]/n;e[0]=parseInt(a*c)}}if(t){var m=e[0]>=e[1]?e[1]:e[0];e={width:m,height:m}}else e={width:e[0],height:e[1]};return e}},{key:"checkRelatedSize",value:function(e){var t=null;return window.vcvImageSizes&&window.vcvImageSizes[e]&&(t=window.vcvImageSizes[e]),t}},{key:"getSizes",value:function(e,t){if(!t)return{width:"",height:""};var a=e.size,n=e.shape,i="";return{width:(i=(a=a.replace(/\s/g,"").replace(/px/g,"").toLowerCase()).match(/\d+(x)\d+/)?this.parseSize(a,"round"===n,t.width,t.height):(i=this.checkRelatedSize(a))?this.parseSize(i,"round"===n,t.width,t.height):this.parseSize({width:t.width,height:t.height},"round"===n,t.width,t.height)).width,height:i.height}}},{key:"setImage",value:function(e){var t=this.getImageUrl(e.atts.image);a.image&&a.image.removeEventListener("load",this.setImageState),a.image&&a.image.removeEventListener("error",this.setError),a.image=new window.Image,a.image.addEventListener("load",this.setImageState),a.image.addEventListener("error",this.setError),t?a.image.src=t:this.setError(),t||this.setState({imgElement:null,parsedWidth:null,parsedHeight:null,naturalWidth:null,naturalHeight:null})}},{key:"setImageState",value:function(e){var t=this,a=e.currentTarget,n=this.getSizes(this.props.atts,a);this.setState({imgElement:a,parsedWidth:n.width,parsedHeight:n.height,naturalWidth:a.width,naturalHeight:a.height},(function(){t.resolve&&t.resolve(!0)}))}},{key:"resetImageSizeState",value:function(){var e=this.getSizes(this.props.atts,this.state.imgElement);this.setState({parsedWidth:e.width,parsedHeight:e.height})}},{key:"setError",value:function(){this.resolve&&this.resolve(!1)}},{key:"getValidSize",value:function(e){var t=e.replace(/\s/g,"").replace(/px/g,"").toLowerCase().match(/\d+(x)\d+/);return t?t[0]:e}},{key:"getImageShortcode",value:function(e){var t=e.classes,a=e.src,n=e.enableLink,i=t+" vcv-lozad",s={};return s.shape=this.props.atts.shape,s.size=this.getValidSize(this.props.atts.size),s.class=i,s["data-src"]=a,s.src="",n&&(s["data-enable-link"]=!0),"[vcvLayoutPostFeaturedImage atts='".concat(JSON.stringify(s),"']")}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.atts,n=e.editor,s=a.shape,r=a.customClass,o=a.alignment,l=a.metaCustomId,u=a.image,d=a.enableLink,c="vce-layout-post-featured-image-container",m="vce-layout-post-featured-image-inner",g="vce-layout-post-featured-image",v={},h={"data-vcv-absolute-image":!0},f={},b=this.getImageUrl(u);-1!==b.indexOf("visualcomposer/resources/images")&&(h["data-vcv-default-image"]=!0),"string"==typeof r&&r&&(c+=" "+r),o&&(c+=" vce-layout-post-featured-image--align-".concat(o)),"rounded"===s&&(m+=" vce-layout-post-featured-image--border-rounded"),"round"===s&&(m+=" vce-layout-post-featured-image--border-round"),l&&(h.id=l);var y=this.applyDO("all"),w=u&&u.urls&&u.urls.length?u.urls[0]:u;w&&w.filter&&"normal"!==w.filter&&(m+=" vce-image-filter--".concat(w.filter));var I="";v["data-vce-delete-attr"]="style";var x={props:f,classes:g,src:b,lazyLoad:!0,enableLink:d};return b&&(I=d?p.createElement("a",{href:"#","data-vcvs-html":this.getImageShortcode(x),className:"vcvhelper"},p.createElement("img",(0,i.default)({className:g,src:b},f))):p.createElement("img",(0,i.default)({className:"".concat(g," vcvhelper"),src:b},f,{"data-vcvs-html":this.getImageShortcode(x)}))),p.createElement("div",(0,i.default)({className:c},n,h),p.createElement("div",(0,i.default)({className:"vce vce-layout-post-featured-image-wrapper"},{},{id:"el-"+t},y),p.createElement("figure",null,p.createElement("div",(0,i.default)({},v,{className:m,style:{paddingBottom:"".concat(this.state.parsedHeight/this.state.parsedWidth*100,"%"),width:this.state.parsedWidth}}),I))))}}]),a}(v.elementComponent);(0,m.default)(f,"image",null);var b=(0,n.getStorage)("hubElements"),y=function(){(0,(0,n.getService)("cook").add)(a("./layoutPostFeaturedImage/settings.json"),(function(e){e.add(f)}),{css:a("./node_modules/raw-loader/index.js!./layoutPostFeaturedImage/styles.css"),editorCss:a("./node_modules/raw-loader/index.js!./layoutPostFeaturedImage/editor.css")})},w=function(){var e=b.state("elementTeasers").get(),t=e[0].elements.findIndex((function(e){return"Featured Image"===e.name}));t>-1&&e[0].elements[t]&&(e[0].elements[t].disabledOnHub=!0,b.state("elementTeasers").set(e))},I=void 0!==window.VCV_UPDATE_ACTIONS,x=window.VCV_EDITOR_TYPE?window.VCV_EDITOR_TYPE():"default";"vcv_layouts"===x||I?(y(),(0,n.getStorage)("settings").state("layoutType").onChange((function(e){var t,a;"postTemplate"===e?(y(),t=b.state("elementTeasers").get(),(a=t[0].elements.findIndex((function(e){return"Featured Image"===e.name})))>-1&&t[0].elements[a]&&(delete t[0].elements[a].disabledOnHub,b.state("elementTeasers").set(t))):((0,n.getStorage)("elementSettings").trigger("remove","layoutPostFeaturedImage"),w())}))):"template"===x||"default"===x?y():b.state("elementTeasers").onChange((function e(){window.setTimeout((function(){w()}),500),b.state("elementTeasers").ignoreChange(e)}))},"./node_modules/raw-loader/index.js!./layoutPostFeaturedImage/editor.css":function(e){e.exports=".vce-layout-post-featured-image-container {\n  min-height: 1em;\n}\n\n.vce-layout-post-featured-image-container[data-vcv-default-image] .vce-layout-post-featured-image-inner {\n  background: #EBEDF7;\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='98px' height='78px' viewBox='0 0 98 78' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3EShape%3C/title%3E%3Cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='lb-placeholders' transform='translate(-651.000000, -1343.000000)' fill='%237E84A1' fill-rule='nonzero'%3E%3Cg id='lb-placeholder-post-list-image' transform='translate(0.000000, 902.000000)'%3E%3Cpath d='M739.2,441 C744.6047,441 749,445.372875 749,450.75 L749,509.25 C749,514.627125 744.6047,519 739.2,519 L660.8,519 C657.011849,519 653.719576,516.851782 652.089027,513.715243 C651.95873,513.629096 651.834676,513.52964 651.719107,513.416791 C651.029082,512.736059 650.835646,511.748825 651.138801,510.896249 C651.047885,510.361557 651,509.811249 651,509.25 L651,450.75 C651,445.372875 655.3953,441 660.8,441 L739.2,441 Z M715.232355,474.862721 L694.463639,499.161244 C694.023105,499.67671 693.381884,499.986945 692.691715,500.015582 C691.99665,500.06331 691.33585,499.796031 690.851263,499.318747 L682.074853,490.761047 C681.149732,489.863753 679.539336,489.863753 678.614216,490.761047 L657,511.835164 C657.873485,513.137872 659.374822,514 661.075326,514 L739.122078,514 C741.809813,514 744,511.84628 744,509.203297 L744,503.308149 L718.971997,474.834084 C718.4972,474.299526 717.841294,474.00361 717.111966,474.00361 C716.602905,473.960654 715.707153,474.304299 715.232355,474.862721 Z M739.111111,446 L660.888889,446 C658.195111,446 656,448.189354 656,450.876067 L656,506 L674.998793,487.211254 C677.77549,484.465131 682.627349,484.465131 685.404045,487.211254 L692.301634,494.032895 L711.3951,471.374954 C712.696676,469.832989 714.571716,468.896552 716.591739,468.76953 L717.051514,468.754978 C719.200265,468.754978 721.236182,469.676821 722.639248,471.292473 L744,495.940675 L744,450.876067 C744,448.189354 741.804889,446 739.111111,446 Z M675,455 C680.515,455 685,459.485 685,465 C685,470.515 680.515,475 675,475 C669.485,475 665,470.515 665,465 C665,459.485 669.485,455 675,455 Z M675,460 C672.245,460 670,462.245 670,465 C670,467.755 672.245,470 675,470 C677.755,470 680,467.755 680,465 C680,462.245 677.755,460 675,460 Z' id='Shape'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.vce-layout-post-featured-image-container[data-vcv-default-image] .vce-layout-post-featured-image {\n  display: none;\n}\n\n.vce-layout-post-featured-image-container[data-vcv-absolute-image] .vce-layout-post-featured-image {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  object-fit: cover;\n  height: 100%;\n}\n"},"./node_modules/raw-loader/index.js!./layoutPostFeaturedImage/styles.css":function(e){e.exports="a.vce-layout-post-featured-image-inner {\n  color: transparent;\n  border-bottom: 0;\n  text-decoration: none;\n  box-shadow: none;\n}\n\na.vce-layout-post-featured-image-inner:hover,\na.vce-layout-post-featured-image-inner:focus {\n  text-decoration: none;\n  box-shadow: none;\n  border-bottom: 0;\n}\n\n.vce-layout-post-featured-image-inner {\n  display: inline-block;\n  vertical-align: top;\n  line-height: 1;\n  max-width: 100%;\n  position: relative;\n}\n\n.vce-layout-post-featured-image-wrapper {\n  display: inline-block;\n  max-width: 100%;\n  overflow: hidden;\n  vertical-align: top;\n}\n\n.vce-layout-post-featured-image-wrapper img {\n  vertical-align: top;\n  max-width: 100%;\n}\n\n.vce-layout-post-featured-image--border-rounded {\n  border-radius: 5px;\n  overflow: hidden;\n}\n\n.vce-layout-post-featured-image--border-round {\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.vce-layout-post-featured-image--align-center {\n  text-align: center;\n}\n\n.vce-layout-post-featured-image--align-right {\n  text-align: right;\n}\n\n.vce-layout-post-featured-image--align-left {\n  text-align: left;\n}\n\n.vce-layout-post-featured-image-wrapper figure {\n  margin: 0;\n}\n\n.vce-layout-post-featured-image-wrapper figcaption {\n  font-style: italic;\n  margin-top: 10px;\n}\n\n.vce-layout-post-featured-image-wrapper figcaption[hidden] {\n  display: none;\n}\n\n.vce-layout-post-featured-image-container .vce-layout-post-featured-image-inner .vce-layout-post-featured-image {\n  box-shadow: none;\n}\n"},"./layoutPostFeaturedImage/settings.json":function(e){"use strict";e.exports=JSON.parse('{"enableLink":{"type":"toggle","access":"public","value":false,"options":{"labelText":"Link to page"}},"hasFeaturedImage":{"type":"string","access":"public","value":"\x3c!-- wp:vcv-gutenberg-blocks/dynamic-field-block {\\"value\\":\\"layout_has_featured_image\\"} --\x3e","options":{"dynamicField":true,"note":"DO NOT REMOVE THIS ATTRIBUTE"}},"image":{"type":"attachimage","access":"public","value":"\x3c!-- wp:vcv-gutenberg-blocks/dynamic-field-block {\\"value\\":\\"featured_image\\",\\"currentValue\\":\\"[publicPath]/resources/images/featured-image-preview.png?vcv-dynamic-field=featured_image\\"} --\x3e\x3c!-- /wp:vcv-gutenberg-blocks/dynamic-field-block --\x3e","options":{"multiple":false,"dynamicField":true,"defaultValue":"\x3c!-- wp:vcv-gutenberg-blocks/dynamic-field-block {\\"value\\":\\"featured_image\\",\\"currentValue\\":\\"[publicPath]/resources/images/featured-image-preview.png?vcv-dynamic-field=featured_image\\"} --\x3e\x3c!-- /wp:vcv-gutenberg-blocks/dynamic-field-block --\x3e","imageFilter":true,"imageSelector":false}},"shape":{"type":"buttonGroup","access":"public","value":"square","options":{"label":"Shape","values":[{"label":"Square","value":"square","icon":"vcv-ui-icon-attribute-shape-square"},{"label":"Rounded","value":"rounded","icon":"vcv-ui-icon-attribute-shape-rounded"},{"label":"Round","value":"round","icon":"vcv-ui-icon-attribute-shape-round"}]}},"designOptions":{"type":"designOptions","access":"public","value":{},"options":{"label":"Design Options"}},"editFormTab1":{"type":"group","access":"protected","value":["image","shape","size","alignment","metaCustomId","customClass"],"options":{"label":"General"}},"metaEditFormTabs":{"type":"group","access":"protected","value":["editFormTab1","designOptions"]},"relatedTo":{"type":"group","access":"protected","value":["General"]},"metaOrder":{"type":"number","access":"protected","value":4},"customClass":{"type":"string","access":"public","value":"","options":{"label":"Extra class name","description":"Add an extra class name to the element and refer to it from the custom CSS option."}},"size":{"type":"string","access":"public","value":"large","options":{"label":"Size","description":"Enter image size (example: \\"thumbnail\\", \\"medium\\", \\"large\\", \\"full\\" or other size defined by a theme). Alternatively, enter a size in pixels (example: 200x100 (width x height))."}},"alignment":{"type":"buttonGroup","access":"public","value":"left","options":{"label":"Alignment","values":[{"label":"Left","value":"left","icon":"vcv-ui-icon-attribute-alignment-left"},{"label":"Center","value":"center","icon":"vcv-ui-icon-attribute-alignment-center"},{"label":"Right","value":"right","icon":"vcv-ui-icon-attribute-alignment-right"}]}},"metaCustomId":{"type":"customId","access":"public","value":"","options":{"label":"Element ID","description":"Apply a unique ID to the element to link it directly by using #your_id (for element ID use lowercase input only)."}},"tag":{"access":"protected","type":"string","value":"layoutPostFeaturedImage"},"sharedAssetsLibrary":{"access":"protected","type":"string","value":{"libraries":[{"libsNames":["lazyLoad"]}]}}}')}},[["./layoutPostFeaturedImage/index.js"]]]);