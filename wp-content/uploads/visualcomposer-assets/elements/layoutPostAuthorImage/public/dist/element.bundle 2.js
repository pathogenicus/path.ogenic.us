(self.vcvWebpackJsonp4x=self.vcvWebpackJsonp4x||[]).push([["element"],{"./layoutPostAuthorImage/index.js":function(e,t,a){"use strict";var i=a("./node_modules/vc-cake/index.js"),n=a.n(i),s=a("./node_modules/@babel/runtime/helpers/esm/extends.js"),r=a("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=a("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=a("./node_modules/@babel/runtime/helpers/esm/createClass.js"),c=a("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=a("./node_modules/@babel/runtime/helpers/esm/inherits.js"),d=a("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),g=a("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),m=a("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=a("./node_modules/react/index.js");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,i=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return(0,d.default)(this,a)}}var v=(0,i.getService)("api"),f=(0,i.getService)("renderProcessor"),b=(0,i.getService)("utils"),y=b.getBlockRegexp,w=b.parseDynamicBlock,I=y(),x=function(e){(0,u.default)(a,e);var t=h(a);function a(e){var i;return(0,l.default)(this,a),i=t.call(this,e),(0,m.default)((0,c.default)(i),"promise",null),i.state={imgElement:null,parsedWidth:null,parsedHeight:null,naturalWidth:null,naturalHeight:null},i.setImage=i.setImage.bind((0,c.default)(i)),i.setImageState=i.setImageState.bind((0,c.default)(i)),i.setError=i.setError.bind((0,c.default)(i)),i}return(0,o.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.promise=new window.Promise((function(t,a){e.resolve=t,e.setImage(e.props)})),f.add(this.promise)}},{key:"componentWillUnmount",value:function(){this.resolve&&this.resolve(!0),a.image&&a.image.removeEventListener("load",this.setImageState),a.image&&a.image.removeEventListener("error",this.setError)}},{key:"componentDidUpdate",value:function(e,t){e.atts.image!==this.props.atts.image?this.setImage(this.props):(e.atts.size!==this.props.atts.size||e.atts.shape!==this.props.atts.shape)&&this.resetImageSizeState()}},{key:"parseSize",value:function(e,t,a,i){var n=!0;"string"==typeof e?e=e.replace(/\s/g,"").replace(/px/g,"").toLowerCase().split("x"):"object"===(0,r.default)(e)&&(n=e.crop,e=[e.width,e.height]),a=parseInt(a),i=parseInt(i);var s=parseInt(e[0])<a,l=parseInt(e[1])<i;if(n)e[0]=parseInt(e[0])<a?parseInt(e[0]):a,e[1]=parseInt(e[1])<i?parseInt(e[1]):i;else{if(e[0]=s?parseInt(e[0]):a,e[1]=l?parseInt(e[1]):i,s&&!l){var o=e[0]/a;e[1]=parseInt(i*o)}if(l&&!s){var c=e[1]/i;e[0]=parseInt(a*c)}if(l&&s)if(i<a){var u=e[0]/a;e[1]=parseInt(i*u)}else{var d=e[1]/i;e[0]=parseInt(a*d)}}if(t){var g=e[0]>=e[1]?e[1]:e[0];e={width:g,height:g}}else e={width:e[0],height:e[1]};return e}},{key:"checkRelatedSize",value:function(e){var t=null;return window.vcvImageSizes&&window.vcvImageSizes[e]&&(t=window.vcvImageSizes[e]),t}},{key:"getSizes",value:function(e,t){if(!t)return{width:"",height:""};var a=e.size,i=e.shape,n="";return{width:(n=(a=a.replace(/\s/g,"").replace(/px/g,"").toLowerCase()).match(/\d+(x)\d+/)?this.parseSize(a,"round"===i,t.width,t.height):(n=this.checkRelatedSize(a))?this.parseSize(n,"round"===i,t.width,t.height):this.parseSize({width:t.width,height:t.height},"round"===i,t.width,t.height)).width,height:n.height}}},{key:"setImage",value:function(e){var t=this.getImageUrl(e.atts.image);a.image&&a.image.removeEventListener("load",this.setImageState),a.image&&a.image.removeEventListener("error",this.setError),a.image=new window.Image,a.image.addEventListener("load",this.setImageState),a.image.addEventListener("error",this.setError),t?a.image.src=t:this.setError(),t||this.setState({imgElement:null,parsedWidth:null,parsedHeight:null,naturalWidth:null,naturalHeight:null})}},{key:"setImageState",value:function(e){var t=this,a=e.currentTarget,i=this.getSizes(this.props.atts,a);this.setState({imgElement:a,parsedWidth:i.width,parsedHeight:i.height,naturalWidth:a.width,naturalHeight:a.height},(function(){t.resolve&&t.resolve(!0)}))}},{key:"resetImageSizeState",value:function(){var e=this.getSizes(this.props.atts,this.state.imgElement);this.setState({parsedWidth:e.width,parsedHeight:e.height})}},{key:"setError",value:function(){this.resolve&&this.resolve(!1)}},{key:"getImageShortcode",value:function(e){var t=e.props,a=e.classes,i=e.isDefaultImage,n=e.src,s=e.isDynamicImage,r=e.naturalSizes,l=e.enableLink,o=a+" vcv-lozad",c='data-src="'.concat(n,'"'),u='[vcvLayoutPostAuthorImage class="'.concat(o,'" ').concat(c,' data-width="').concat(this.state.parsedWidth||0,'" data-height="').concat(this.state.parsedHeight||0,'" src="').concat("",'" data-img-src="').concat(t["data-img-src"],'"');l&&(u+=' data-enable-link="true"');var d=t.alt,g=t.title;if(i&&(u+=' data-default-image="true"'),s){var m,p=w((null===(m=this.props.rawAtts.image)||void 0===m?void 0:m.full)||this.props.rawAtts.image);u+=' data-dynamic="'.concat(p.blockAtts.value,'"');try{var h,v=this.getPublicImage((null===(h=this.props.rawAtts.image)||void 0===h?void 0:h.full)||this.props.rawAtts.image),f=new URL(v),b=new URLSearchParams(f.search);b.get("alt")&&(d=b.get("alt")),b.get("title")&&(g=b.get("title"))}catch(y){console.warn("URL is not valid, skipping",p,p.blockAtts.currentValue)}r&&(u+=' data-dynamic-natural-size="true"')}return u+=' alt="'.concat(d,'" title="').concat(g,'" ]'),u+='<noscript>\n      <img class="'.concat(a,'" src="').concat(n,'" width="').concat(this.state.parsedWidth||0,'" height="').concat(this.state.parsedHeight||0,'" alt="').concat(d,'" title="').concat(g,'" />\n    </noscript>')}},{key:"render",value:function(){var e,t=this.props,a=t.id,i=t.atts,n=t.editor,r=i.shape,l=i.customClass,o=i.size,c=i.alignment,u=i.metaCustomId,d=i.image,g=i.enableLink,m="vce-single-image-container",h="vce-single-image-inner vce-single-image--absolute",v="vce-single-image",f={},b={},y={},w=this.getImageUrl(d),x=(null===(e=this.props.rawAtts.image)||void 0===e?void 0:e.full)||this.props.rawAtts.image,k=Array.isArray("string"==typeof x&&x.match(I));y["data-img-src"]=w,y.alt=d&&d.alt?d.alt:"",y.title=d&&d.title?d.title:"";var S=d&&d.caption?d.caption:"";if(k)try{var z=new URL(w),E=new URLSearchParams(z.search);y.alt=E.get("alt")?E.get("alt"):"",y.title=E.get("title")?E.get("title"):"",S=E.get("caption")?E.get("caption"):""}catch(W){console.warn("URL is not valid, skipping",d,d.full)}"string"==typeof l&&l&&(m+=" "+l),c&&(m+=" vce-single-image--align-".concat(c)),"rounded"===r&&(h+=" vce-single-image--border-rounded"),"round"===r&&(h+=" vce-single-image--border-round"),u&&(b.id=u);var A=this.applyDO("all"),L=!S,_=p.createElement("figcaption",{hidden:L},S),j=d&&d.urls&&d.urls.length?d.urls[0]:d;j&&j.filter&&"normal"!==j.filter&&(h+=" vce-image-filter--".concat(j.filter));var P="",R=!1;k&&(1===this.state.naturalWidth&&1===this.state.naturalHeight||(!o||"full"===o)&&"round"!==r)&&(f["data-vce-delete-attr"]="style",R=!0);var C={props:y,classes:v,isDefaultImage:!(d&&d.id),src:w,isDynamicImage:k,naturalSizes:R,lazyLoad:!0,enableLink:g};return w&&(P=g?p.createElement("a",{href:"#","data-vcvs-html":this.getImageShortcode(C),className:"vcvhelper"},p.createElement("img",(0,s.default)({className:v,src:w},y))):p.createElement("img",(0,s.default)({className:"".concat(v," vcvhelper"),src:w},y,{"data-vcvs-html":this.getImageShortcode(C)}))),p.createElement("div",(0,s.default)({className:m},n,b),p.createElement("div",(0,s.default)({className:"vce vce-single-image-wrapper"},{},{id:"el-"+a},A),p.createElement("figure",null,p.createElement("div",{className:"vce-single-image-figure-inner",style:{width:this.state.parsedWidth}},p.createElement("div",(0,s.default)({},f,{className:h,style:{paddingBottom:"".concat(this.state.parsedHeight/this.state.parsedWidth*100,"%"),width:"100%"}}),P)),_)))}}]),a}(v.elementComponent);(0,m.default)(x,"image",null),(0,n().getService("cook").add)(a("./layoutPostAuthorImage/settings.json"),(function(e){e.add(x)}),{css:a("./node_modules/raw-loader/index.js!./layoutPostAuthorImage/styles.css"),editorCss:a("./node_modules/raw-loader/index.js!./layoutPostAuthorImage/editor.css")})},"./node_modules/raw-loader/index.js!./layoutPostAuthorImage/editor.css":function(e){e.exports=".vce-single-image-container {\n  min-height: 1em;\n}\n"},"./node_modules/raw-loader/index.js!./layoutPostAuthorImage/styles.css":function(e){e.exports='a.vce-single-image-inner {\n  color: transparent;\n  border-bottom: 0;\n  text-decoration: none;\n  box-shadow: none;\n}\n\na.vce-single-image-inner:hover,\na.vce-single-image-inner:focus {\n  text-decoration: none;\n  box-shadow: none;\n  border-bottom: 0;\n}\n\n.vce-single-image-inner {\n  display: inline-block;\n  vertical-align: top;\n  line-height: 1;\n  max-width: 100%;\n  position: relative;\n}\n\n.vce-single-image-wrapper {\n  display: inline-block;\n  max-width: 100%;\n  overflow: hidden;\n  vertical-align: top;\n}\n\n.vce-single-image-wrapper img {\n  vertical-align: top;\n  max-width: 100%;\n}\n\n.vce-single-image--border-rounded {\n  border-radius: 5px;\n  overflow: hidden;\n}\n\n.vce-single-image--border-round {\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.vce-single-image--align-center {\n  text-align: center;\n}\n\n.vce-single-image--align-right {\n  text-align: right;\n}\n\n.vce-single-image--align-left {\n  text-align: left;\n}\n\n.vce-single-image-wrapper figure {\n  margin: 0;\n}\n\n.vce-single-image-wrapper figcaption {\n  font-style: italic;\n  margin-top: 10px;\n}\n\n.vce-single-image-wrapper figcaption[hidden] {\n  display: none;\n}\n\n.vce-single-image-inner.vce-single-image--absolute .vce-single-image:not([data-dynamic-natural-size="true"]) {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  object-fit: cover;\n  height: 100%;\n}\n\n.vce-single-image-container .vce-single-image-inner .vce-single-image {\n  box-shadow: none;\n}\n\n.vce-single-image-figure-inner {\n  display: inline-block;\n}\n'},"./layoutPostAuthorImage/settings.json":function(e){"use strict";e.exports=JSON.parse('{"enableLink":{"type":"toggle","access":"public","value":true,"options":{"labelText":"Link to author page"}},"image":{"type":"attachimage","access":"public","value":"\x3c!-- wp:vcv-gutenberg-blocks/dynamic-field-block {\\"value\\":\\"post_author_image\\",\\"currentValue\\":\\"[publicPath]/resources/images/featured-image-preview.png?vcv-dynamic-field=featured_image\\"} --\x3e\x3c!-- /wp:vcv-gutenberg-blocks/dynamic-field-block --\x3e","options":{"multiple":false,"dynamicField":true,"defaultValue":"\x3c!-- wp:vcv-gutenberg-blocks/dynamic-field-block {\\"value\\":\\"post_author_image\\",\\"currentValue\\":\\"[publicPath]/resources/images/featured-image-preview.png?vcv-dynamic-field=featured_image\\"} --\x3e\x3c!-- /wp:vcv-gutenberg-blocks/dynamic-field-block --\x3e","imageFilter":true,"imageSelector":false}},"shape":{"type":"buttonGroup","access":"public","value":"square","options":{"label":"Shape","values":[{"label":"Square","value":"square","icon":"vcv-ui-icon-attribute-shape-square"},{"label":"Rounded","value":"rounded","icon":"vcv-ui-icon-attribute-shape-rounded"},{"label":"Round","value":"round","icon":"vcv-ui-icon-attribute-shape-round"}]}},"designOptions":{"type":"designOptions","access":"public","value":{},"options":{"label":"Design Options"}},"editFormTab1":{"type":"group","access":"protected","value":["enableLink","image","shape","size","alignment","metaCustomId","customClass"],"options":{"label":"General"}},"metaEditFormTabs":{"type":"group","access":"protected","value":["editFormTab1","designOptions"]},"relatedTo":{"type":"group","access":"protected","value":["General"]},"metaOrder":{"type":"number","access":"protected","value":4},"customClass":{"type":"string","access":"public","value":"","options":{"label":"Extra class name","description":"Add an extra class name to the element and refer to it from the custom CSS option."}},"size":{"type":"string","access":"public","value":"large","options":{"label":"Size","description":"Enter image size (example: \\"thumbnail\\", \\"medium\\", \\"large\\", \\"full\\" or other size defined by a theme). Alternatively, enter a size in pixels (example: 200x100 (width x height))."}},"alignment":{"type":"buttonGroup","access":"public","value":"left","options":{"label":"Alignment","values":[{"label":"Left","value":"left","icon":"vcv-ui-icon-attribute-alignment-left"},{"label":"Center","value":"center","icon":"vcv-ui-icon-attribute-alignment-center"},{"label":"Right","value":"right","icon":"vcv-ui-icon-attribute-alignment-right"}]}},"metaCustomId":{"type":"customId","access":"public","value":"","options":{"label":"Element ID","description":"Apply a unique ID to the element to link it directly by using #your_id (for element ID use lowercase input only)."}},"tag":{"access":"protected","type":"string","value":"layoutPostAuthorImage"},"sharedAssetsLibrary":{"access":"protected","type":"string","value":{"libraries":[{"libsNames":["lazyLoad"]}]}}}')}},[["./layoutPostAuthorImage/index.js"]]]);